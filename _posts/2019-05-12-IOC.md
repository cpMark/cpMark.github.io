---
layout:     post
title:      "IOC"
subtitle:   "Hello World, Hello Blog"
date:       2019-05-12 23:42:00
author:     "Walker"
header-img: "img/icon.jpg"
tags:
   - Spring
---

## 概述

IOC（Inversion Of Control）控制反转，另一种说法是DI（Dependency Injection），即依赖注入。它不是一种技术实现，而是一种设计思想。旨在为各对象的创建它们的依赖对象，并协调工作，让每一个对象只关注其自身的业务逻辑关系就可以。

> 控制反转是怎么理解的？原来由各个对象自己管理自己需要的依赖对象的创建和协作，当前变成了由Spring容器控制对象如何获取外部资源，并协调其工作，在获取依赖对象的方式上进行了反转。

## 案例说明

1. 正常场景，即没有IOC的情况

   某一天，你生病了，但是你不清楚自己到底得了什么病，你只知道自己头疼，咳嗽，全身无力。这个时候你决定去药店买药，药店有很多种药，仅仅是治疗头疼就有好几十种，还有西药中药等区别。然后你自己看了看说明书，选择了一盒你自己觉得最能治疗自己病症的药，付钱吃药，期待可以早点好起来。 

2. IOC场景

   你直接去医院看医生，医生给你做了检查，知道你的病症是什么，由什么原因引起的；同时医生非常了解有哪些药能治疗你的病痛，并且能根据你的自身情况进行筛选。只需要短短的十几分钟，你就能拿到对症下药的药品，即省时又省力。

在上面的场景中，IOC起到的就是医生的作用，它收集你的需求，并且对症下药，直接把药开给你。你就是对象，药品就是你所需要的外部资源。通过医生，你不用再去找药品，而是通过医生把药品开给你。这就是IOC的精髓所在。 

**在Spring的工作方式中，所有的类都会在spring容器中登记，告诉spring这是个什么东西，你需要什么东西，然后spring会在系统运行到适当的时候，把你要的东西主动给你，同时也把你交给其他需要你的东西。所有的类的创建、销毁都由 spring来控制，也就是说控制对象生存周期的不再是引用它的对象，而是spring。对于某个具体的对象而言，以前是它控制其他对象，现在是所有对象都被spring控制，所以这叫控制反转。** 其优点是：降低了组件之间的耦合，同时也降低了业务对象之间替换的复杂性，使之能够灵活的管理对象。 

注入方式：设置注入和构造注入。
设置注入的优点：直观，自然  
构造注入的优点：可以在构造器中决定依赖关系的顺序。